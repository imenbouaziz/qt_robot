<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maths & Face Expression</title>
    <script>
        // Fonction pour changer l'expression du visage du robot
        function changeFace(expression) {
            let face = document.getElementById("face");
            if (expression === 'happy') {
                face.innerHTML = "<div class='eyes'></div><div class='eyes'></div><div class='mouth happy'></div>";
                speak("Bravo !");
            } else if (expression === 'sad') {
                face.innerHTML = "<div class='eyes'></div><div class='eyes'></div><div class='mouth sad'></div>";
                speak("Réessayer encore !");
            } else if (expression === 'angry') {
                face.innerHTML = "<div class='eyes angry'></div><div class='eyes angry'></div><div class='mouth angry'></div>";
                speak("Pourquoi es-tu en colère ?");
            }
        }

        // Fonction pour faire parler le robot
        function speak(text) {
            const msg = new SpeechSynthesisUtterance(text);
            window.speechSynthesis.speak(msg);
        }

        // Fonction pour générer un problème mathématique basé sur l'opération
        function generateProblem(operation) {
            let num1 = Math.floor(Math.random() * 10) + 1;
            let num2 = Math.floor(Math.random() * 10) + 1;
            let result;

            if (operation === 'addition') {
                result = num1 + num2;
                document.getElementById("problem").innerHTML = num1 + " + " + num2;
            } else if (operation === 'soustraction') {
                result = num1 - num2;
                document.getElementById("problem").innerHTML = num1 + " - " + num2;
            } else if (operation === 'multiplication') {
                result = num1 * num2;
                document.getElementById("problem").innerHTML = num1 + " * " + num2;
            }

            // Stocker la réponse correcte dans un champ caché
            document.getElementById("correctAnswer").value = result;
        }

        // Vérification de la réponse de l'utilisateur
        function checkAnswer() {
            let userAnswer = document.getElementById("userAnswer").value;
            let correctAnswer = document.getElementById("correctAnswer").value;

            if (userAnswer == correctAnswer) {
                changeFace('happy');
            } else {
                changeFace('sad');
            }

            // Réinitialiser pour une nouvelle question
            document.getElementById("userAnswer").value = "";
            setTimeout(generateProblem, 2000, document.getElementById("operation").value);
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #face {
            width: 200px;
            height: 150px;
            background: #fff;
            border-radius: 20px;
            display: inline-block;
            position: relative;
            border: 3px solid black;
            padding-top: 30px;
        }
        .eyes {
            width: 20px;
            height: 20px;
            background: black;
            border-radius: 50%;
            position: absolute;
            top: 40px;
        }
        .eyes:first-child {
            left: 50px;
        }
        .eyes:last-child {
            right: 50px;
        }
        .mouth {
            width: 60px;
            height: 20px;
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
        }
        .mouth.happy {
            background: none;
            border: 4px solid black;
            border-top: none;
            border-radius: 0 0 30px 30px;
            height: 30px;
        }
        .mouth.sad {
            background: none;
            border: 4px solid black;
            border-bottom: none;
            border-radius: 30px 30px 0 0;
            height: 30px;
        }
        .mouth.angry {
            background: black;
            height: 10px;
            width: 50px;
            border-radius: 0;
        }
        .eyes.angry:first-child {
            transform: rotate(20deg);
            top: 35px;
        }
        .eyes.angry:last-child {
            transform: rotate(-20deg);
            top: 35px;
        }
        button {
            font-size: 20px;
            margin: 10px;
            padding: 10px;
        }
        #problem {
            font-size: 30px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Maths pour Enfants - Robot</h1>
    <div id="face">
        <div class="eyes"></div>
        <div class="eyes"></div>
        <div class="mouth happy"></div>
    </div>
    <br><br>

    <div id="menu">
        <label for="operation">Choisissez une opération :</label>
        <select id="operation" onchange="generateProblem(this.value)">
            <option value="addition">Addition</option>
            <option value="soustraction">Soustraction</option>
            <option value="multiplication">Multiplication</option>
        </select>
    </div>

    <div id="problem"></div>
    <input type="number" id="userAnswer" placeholder="Votre réponse">
    <button onclick="checkAnswer()">Répondre</button>

    <input type="hidden" id="correctAnswer">

    <script>
        // Générer un problème au chargement initial
        window.onload = function() {
            generateProblem('addition');
        };
    </script>

</body>
</html>
